@import "tailwindcss";
@import "../../vendor/livewire/flux/dist/flux.css";

@plugin "@tailwindcss/forms";
@plugin "@tailwindcss/typography";

@source "../../vendor/laravel/framework/src/Illuminate/Pagination/resources/views/*.blade.php";
@source "../../vendor/laravel/jetstream/**/*.blade.php";

@custom-variant dark (&:where(.dark, .dark *));

@theme {
    --font-sans:
        Figtree, ui-sans-serif, system-ui, sans-serif, "Apple Color Emoji", "Segoe UI Emoji", "Segoe UI Symbol",
        "Noto Color Emoji";
    --color-accent: var(--color-cyan-500);
    --color-accent-content: var(--color-cyan-600);
    --color-accent-foreground: var(--color-white);
}

@layer theme {
    .dark {
        --color-zinc-50: var(--color-slate-50);
        --color-zinc-100: var(--color-slate-100);
        --color-zinc-200: var(--color-slate-200);
        --color-zinc-300: var(--color-slate-300);
        --color-zinc-400: var(--color-slate-400);
        --color-zinc-500: var(--color-slate-500);
        --color-zinc-600: var(--color-slate-600);
        --color-zinc-700: var(--color-slate-700);
        --color-zinc-800: var(--color-slate-800);
        --color-zinc-900: var(--color-slate-900);
        --color-zinc-950: var(--color-slate-950);
        --color-accent: var(--color-cyan-500);
        --color-accent-content: var(--color-cyan-400);
        --color-accent-foreground: var(--color-white);
    }
}

[data-flux-control]:focus {
    @apply !ring-accent-content !border-accent-content;
}

@layer base {
    *,
    ::after,
    ::before,
    ::backdrop,
    ::file-selector-button {
        border-color: var(--color-gray-200, currentColor);
    }
}

[x-cloak] {
    display: none;
}

button {
    @apply cursor-pointer;
}

.badge-version {
    @apply bg-gray-100 text-gray-700 dark:bg-gray-700 dark:text-gray-100;

    &.red {
        @apply bg-red-100 text-red-700 dark:bg-red-700 dark:text-red-100;
    }

    &.orange {
        @apply bg-orange-100 text-orange-700 dark:bg-orange-700 dark:text-orange-100;
    }

    &.amber {
        @apply bg-amber-100 text-amber-700 dark:bg-amber-700 dark:text-amber-100;
    }

    &.yellow {
        @apply bg-yellow-100 text-yellow-700 dark:bg-yellow-700 dark:text-yellow-100;
    }

    &.lime {
        @apply bg-lime-100 text-lime-700 dark:bg-lime-700 dark:text-lime-100;
    }

    &.green {
        @apply bg-green-100 text-green-700 dark:bg-green-700 dark:text-green-100;
    }

    &.emerald {
        @apply bg-emerald-100 text-emerald-700 dark:bg-emerald-700 dark:text-emerald-100;
    }

    &.teal {
        @apply bg-teal-100 text-teal-700 dark:bg-teal-700 dark:text-teal-100;
    }

    &.cyan {
        @apply bg-cyan-100 text-cyan-700 dark:bg-cyan-700 dark:text-cyan-100;
    }

    &.sky {
        @apply bg-sky-100 text-sky-700 dark:bg-sky-700 dark:text-sky-100;
    }

    &.blue {
        @apply bg-blue-100 text-blue-700 dark:bg-blue-700 dark:text-blue-100;
    }

    &.indigo {
        @apply bg-indigo-100 text-indigo-700 dark:bg-indigo-700 dark:text-indigo-100;
    }

    &.violet {
        @apply bg-violet-100 text-violet-700 dark:bg-violet-700 dark:text-violet-100;
    }

    &.purple {
        @apply bg-purple-100 text-purple-700 dark:bg-purple-700 dark:text-purple-100;
    }

    &.fuchsia {
        @apply bg-fuchsia-100 text-fuchsia-700 dark:bg-fuchsia-700 dark:text-fuchsia-100;
    }

    &.pink {
        @apply bg-pink-100 text-pink-700 dark:bg-pink-700 dark:text-pink-100;
    }

    &.rose {
        @apply bg-rose-100 text-rose-700 dark:bg-rose-700 dark:text-rose-100;
    }

    &.slate {
        @apply bg-slate-100 text-slate-700 dark:bg-slate-700 dark:text-slate-100;
    }

    &.gray,
    &.grey {
        @apply bg-gray-100 text-gray-700 dark:bg-gray-700 dark:text-gray-100;
    }

    &.zinc {
        @apply bg-zinc-100 text-zinc-700 dark:bg-zinc-700 dark:text-zinc-100;
    }

    &.neutral {
        @apply bg-neutral-100 text-neutral-700 dark:bg-neutral-700 dark:text-neutral-100;
    }

    &.stone {
        @apply bg-stone-100 text-stone-700 dark:bg-stone-700 dark:text-stone-100;
    }
}

.user-markdown {
    &.deleted {
        @apply mt-1 text-red-500 dark:text-red-400;
    }

    .deleted {
        @apply text-red-500 dark:text-red-400;

        & * {
            color: var(--color-red-500) !important;
        }

        .dark & * {
            color: var(--color-red-400) !important;
        }

        & a {
            color: var(--color-red-500) !important;
            &:hover {
                color: var(--color-red-500) !important;
            }
        }

        .dark & a {
            color: var(--color-red-400) !important;
            &:hover {
                color: var(--color-red-400) !important;
            }
        }

        & img {
            filter: grayscale(100%) !important;
            opacity: 0.7;
        }
    }

    a {
        @apply break-all text-black underline transition-colors hover:text-cyan-800 dark:text-white hover:dark:text-cyan-200;
    }

    b,
    strong {
        @apply font-bold;
    }

    i,
    em {
        @apply italic;
    }

    h1,
    h2,
    h3,
    h4,
    h5,
    h6 {
        @apply mt-4 mb-2 font-bold text-black dark:text-white;
    }

    h1 {
        @apply text-3xl;
    }

    h2 {
        @apply text-2xl;
    }

    h3 {
        @apply text-xl;
    }

    h4 {
        @apply text-lg;
    }

    h5 {
        @apply text-base;
    }

    h6 {
        @apply text-sm;
    }

    p {
        @apply my-2 wrap-anywhere text-gray-800 dark:text-gray-300;
    }

    hr {
        border: 0;
        height: 2px;
        background: #333 linear-gradient(to right, var(--color-gray-950), var(--color-cyan-600), var(--color-gray-950));
        margin: 1rem 0;
    }

    ul {
        @apply mb-2 list-disc;
    }

    ol {
        @apply mb-2 list-decimal;
    }

    li {
        @apply my-2 ml-7 text-gray-800 dark:text-gray-300;
    }

    blockquote {
        @apply my-4 border-s-4 border-cyan-400 bg-gray-100 p-4 dark:border-cyan-600 dark:bg-gray-900;

        p {
            @apply text-lg leading-relaxed font-medium text-gray-900 italic dark:text-white;
        }
    }

    pre > code {
        @apply rounded-md text-sm;
    }

    img {
        @apply inline;
    }

    iframe {
        width: 100%;
        aspect-ratio: 16 / 9;
        @apply my-1;
    }

    .tab-navigation {
        @apply flex flex-row flex-wrap gap-1;

        .tab-link {
            @apply cursor-pointer rounded-t-sm border-b-2 border-transparent bg-slate-100 px-3 py-1 text-nowrap text-black uppercase transition-colors hover:border-b-cyan-400 hover:bg-slate-200 hover:text-cyan-800 dark:bg-slate-900 dark:text-white dark:hover:border-b-cyan-600 dark:hover:bg-slate-800 dark:hover:text-cyan-200;

            &.active {
                @apply border-b-cyan-400 bg-slate-200 font-bold text-cyan-700 transition-colors dark:border-b-cyan-600 dark:bg-slate-800 dark:text-cyan-300;
            }
        }
    }

    /* Style first tab link as active until JS initializes */
    .tab-navigation:not([data-tabs-initialized]) {
        .tab-link:first-child {
            @apply border-b-cyan-400 bg-slate-200 font-bold text-cyan-700 dark:border-b-cyan-600 dark:bg-slate-800 dark:text-cyan-300;
        }
    }

    .tab-title {
        @apply hidden;
    }

    .tab-content {
        @apply mt-1 rounded-t-sm rounded-b-2xl bg-slate-100 p-4 dark:bg-gray-900;
    }

    /* Hide non-first tab content until JS initializes */
    .tabset:not([data-tabs-initialized]) .tab-panel:not(:first-child) .tab-content {
        @apply hidden;
    }
}

.user-markdown-message {
    & > p:first-child {
        @apply mt-0;
    }

    & > p:last-child {
        @apply mb-0;
    }

    a {
        @apply break-all underline transition-opacity hover:opacity-80;
    }

    b,
    strong {
        @apply font-semibold;
    }

    i,
    em {
        @apply italic;
    }

    h1,
    h2,
    h3,
    h4,
    h5,
    h6 {
        @apply mt-3 mb-1 font-semibold;
    }

    h1 {
        @apply text-lg;
    }

    h2 {
        @apply text-base;
    }

    h3,
    h4,
    h5,
    h6 {
        @apply text-sm;
    }

    p {
        @apply my-1.5 wrap-anywhere;
    }

    ul {
        @apply mb-1.5 list-disc;
    }

    ol {
        @apply mb-1.5 list-decimal;
    }

    li {
        @apply my-1 ml-5;
    }

    blockquote {
        @apply my-2 border-s-2 border-current pl-3 opacity-80;

        p {
            @apply text-sm leading-relaxed italic;
        }
    }

    code {
        @apply rounded bg-black/10 px-1 py-0.5 font-mono text-xs dark:bg-white/10;
    }

    pre > code {
        @apply block overflow-x-auto rounded-md p-2 text-xs;
    }

    del,
    s {
        @apply line-through opacity-75;
    }

    br {
        @apply block h-1;
    }
}

.ribbon {
    --f: 0.5em;
    position: absolute;
    top: 0;
    left: 0;
    line-height: 1.5;
    font-size: 18px;
    font-weight: bold;
    padding-inline: 1lh;
    padding-bottom: var(--f);
    border-image: conic-gradient(#0008 0 0) 51% / var(--f);
    clip-path: polygon(
        100% calc(100% - var(--f)),
        100% 100%,
        calc(100% - var(--f)) calc(100% - var(--f)),
        var(--f) calc(100% - var(--f)),
        0 100%,
        0 calc(100% - var(--f)),
        999px calc(100% - var(--f) - 999px),
        calc(100% - 999px) calc(100% - var(--f) - 999px)
    );
    transform: translate(calc((cos(45deg) - 1) * 100%), -100%) rotate(-45deg);
    transform-origin: 100% 100%;
    @apply bg-cyan-500 text-white dark:bg-cyan-700;

    &.red {
        @apply bg-red-500 text-white dark:bg-red-700;
    }

    &.amber {
        @apply bg-amber-500 text-white dark:bg-amber-700;
    }

    &.emerald {
        @apply bg-emerald-500 text-white dark:bg-emerald-700;
    }

    &.sky {
        @apply bg-sky-500 text-white dark:bg-sky-700;
    }

    &.gray {
        @apply bg-gray-500 text-white dark:bg-gray-700;
    }

    &.yellow {
        @apply bg-yellow-400 text-black dark:bg-yellow-600;
    }
}

.rainbow {
    height: 100%;
    width: 100%;
    left: 0;
    right: 0;
    top: 0;
    bottom: 0;
    position: absolute;
    background: linear-gradient(
        124deg,
        #ff2400,
        #e81d1d,
        #e8b71d,
        #e3e81d,
        #1de840,
        #1ddde8,
        #2b1de8,
        #dd00f3,
        #dd00f3
    );
    background-size: 1800% 1800%;
    -webkit-animation: rainbow 18s ease infinite;
    -o-animation: rainbow 18s ease infinite;
    animation: rainbow 18s ease infinite;
}

@keyframes rainbow {
    0% {
        background-position: 0 82%;
    }
    50% {
        background-position: 100% 19%;
    }
    100% {
        background-position: 0 82%;
    }
}

@layer utilities {
    .animate-heart-bounce {
        animation: heart-bounce 0.8s cubic-bezier(0.34, 1.56, 0.64, 1) forwards;
        transform-origin: center;
    }
    .animate-heart-bounce::before {
        content: "";
        position: absolute;
        inset: -2px;
        background: radial-gradient(circle at center, currentColor 0%, transparent 70%);
        opacity: 0;
        animation: pulse 0.8s cubic-bezier(0.34, 1.56, 0.64, 1) forwards;
    }
}

@keyframes heart-bounce {
    0% {
        transform: rotate(0deg) scale(1);
    }
    100% {
        transform: rotate(360deg) scale(1);
    }
}

@keyframes pulse {
    0% {
        transform: scale(0.8);
        opacity: 0.5;
    }
    50% {
        transform: scale(1.2);
        opacity: 0.2;
    }
    100% {
        transform: scale(1.5);
        opacity: 0;
    }
}

/* Fix z-index for flash messages to appear above navigation */
.fl-wrapper {
    z-index: 60 !important;
}

/* Fix autocomplete background colors to match the input field */
input:-webkit-autofill,
input:-webkit-autofill:hover,
input:-webkit-autofill:focus,
input:-webkit-autofill:active,
input:autofill,
input:autofill:hover,
input:autofill:focus,
input:autofill:active {
    -webkit-background-clip: text;
    -webkit-text-fill-color: rgb(226 232 240); /* slate-200 for dark mode */
    transition: background-color 5000s ease-in-out 0s;
    box-shadow: inset 0 0 20px 20px rgb(30 41 59); /* slate-800 - Match Flux dark input */
}

/* For light mode */
.light input:-webkit-autofill,
.light input:-webkit-autofill:hover,
.light input:-webkit-autofill:focus,
.light input:-webkit-autofill:active,
.light input:autofill,
.light input:autofill:hover,
.light input:autofill:focus,
.light input:autofill:active {
    -webkit-text-fill-color: rgb(15 23 42); /* slate-900 for light mode */
    box-shadow: inset 0 0 20px 20px rgb(255 255 255); /* white - Match Flux light input */
}

/* Fix 1Password autofill background colors to match normal input backgrounds */
input[data-com-onepassword-filled],
select[data-com-onepassword-filled],
textarea[data-com-onepassword-filled],
input[data-com-onepassword-filled="light"],
select[data-com-onepassword-filled="light"],
textarea[data-com-onepassword-filled="light"] {
    /* Match Flux UI dark mode input background */
    background-color: rgb(30 41 59) !important; /* slate-800 */
    color: rgb(226 232 240) !important; /* slate-200 */
}

/* For light mode - 1Password */
.light input[data-com-onepassword-filled],
.light select[data-com-onepassword-filled],
.light textarea[data-com-onepassword-filled],
.light input[data-com-onepassword-filled="light"],
.light select[data-com-onepassword-filled="light"],
.light textarea[data-com-onepassword-filled="light"] {
    /* Match Flux UI light mode input background */
    background-color: rgb(255 255 255) !important; /* white */
    color: rgb(15 23 42) !important; /* slate-900 */
}

/* Fix callout padding to be equal on all sides */
.flux-callout {
    padding: 1rem !important;
}
